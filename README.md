# My Express Server

Этот проект представляет собой сервер, разработанный с использованием Node.js и Express.js.<br>
Сервер предоставляет маршруты для работы с пользователями и статьями, позволяя выполнять операции чтения,<br>
создания, обновления и удаления данных.

## Требования:

- Node.js v12 или новее<br>
- npm или yarn

## Установить зависимости:

npm install или yarn install

## Запуск сервера (cервер будет прослушивать на порту 3000):

npm start или yarn start

## Маршруты:

### Корневой маршрут:

GET /: Возвращает "Get root route".

### Маршруты пользователей:

GET /users: Возвращает список всех пользователей, либо: No users found(если не отправляли данные).<br>
POST /users: Создает нового пользователя.<br>
GET /users/:userId: Возвращает информацию о пользователе с указанным идентификатором.<br>
PUT /users/:userId: Обновляет информацию о пользователе с указанным идентификатором.<br>
DELETE /users/:userId: Удаляет пользователя с указанным идентификатором.<br>

### Маршруты статей:

GET /articles: Возвращает список всех статей, либо: No article found(если не отправляли данные) <br>
POST /articles: Создает новую статью.<br>
GET /articles/:articleId: Возвращает информацию о статье с указанным идентификатором.<br>
PUT /articles/:articleId: Обновляет информацию о статье с указанным идентификатором.<br>
DELETE /articles/:articleId: Удаляет статью с указанным идентификатором.<br>

## Middlewares:

### logger

Логгирует все HTTP-запросы и ответы.<br>

Откройте терминал, запустите сервер и отправьте любой запрос через Postman.<br>
В терминале вы увидите логи запросов и ответов.<br>

### basicUsersAuth (for /users)

Проверяет наличие заголовка (Key, Value) в запросе.<br>

Попробуйте отправить запрос на любой маршрут users без заголовка.<br>
Вы получите ответ с ошибкой 401 "Access denied. No credentials sent.".<br>
Добавьте в заголовоке (Key - authorization, Value - любое значение(например 1)). Доступ к users будет разрешен<br>

### errorHandler

Обрабатывает все ошибки, которые были переданы через next(error).<br>
Он логирует стек ошибки и возвращает клиенту ответ с соответствующим статусом и сообщением.<br>

### authorizeArticleAccess

выполняет проверку доступа к статьям на основе токена, полученного из заголовка Authorization запроса
для получения доступа к Articles, введите в заголовке: Key - Authorization, value - Bearer token123

### checkArticlesEmpty и checkUsersEmpty

проверяет, пуст ли массив обьектов: articles(checkArticlesEmpty) или users(checkUsersEmpty) .<br>

Если массив пустой, он отправляет клиенту ответ с сообщением "No users found" / "No articles found"<br>
c статусом 200

### validateUserData (for /users)

проверяет данные запроса, чтобы убедиться, что в теле запроса присутствуют поля "username" и "email",<br>
а так же введенные данные соответствуют своим типам(string, email)

пример - {
"username": "newuser",
"email": "newuser@example.com"
}
Если одно или оба этих поля отсутствуют, либо введен неправильный тип данных мидлвар отправляет ответ с ошибкой и статусом 400<br>

### validateArticleData (for /articles)

проверяет данные запроса, чтобы убедиться, что в теле запроса присутствуют поля "title" и "content".<br>

пример - {
"title": "New Article",
"content": "Content of the new article."
}
Если одно или оба этих поля отсутствуют, мидлвар отправляет ответ с ошибкой и статусом 400<br>

## Тестирование с помощью Postman:

### Для тестирования запросов, в postman, в разделе body - нужно создать обьекты<br> в массивах users и articles(примеры обьектов выше), и отправить методом POST на сервер

1. Запустите сервер командой `npm start` или `yarn start`.<br>
2. Откройте Postman и создайте новый запрос.<br>
3. Укажите метод запроса, URL и, при необходимости, параметры запроса.<br>
4. Отправьте запрос на сервер и просмотрите ответ.<br>
